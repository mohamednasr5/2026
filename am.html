<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÿßÿ≥ÿ™ÿ∂ÿßŸÅÿ© ÿ£Ÿàÿ®ÿ±ÿß ÿπÿßÿ¥Ÿàÿ± - Kids Area</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Orbitron:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ============================================================
           üé°üé™ OPERA ASHOUR ‚Äî AMUSEMENT PARK COLOUR SYSTEM
           Colours are pulled directly from the ferris-wheel cabins,
           the balloon, the coaster and the grassy ground that already
           live in the scene.  Every UI element now speaks the same
           carnival language.
           ============================================================ */
        :root {
            /* ‚îÄ‚îÄ Sky (body bg, scene bg) ‚îÄ‚îÄ */
            --sky-top   : #4a90d9;   /* deeper blue at horizon-top */
            --sky-mid   : #87ceeb;   /* classic sky-blue mid */
            --sky-light : #d6eef9;   /* soft near-ground */

            /* ‚îÄ‚îÄ Grass / Ground ‚îÄ‚îÄ */
            --grass     : #48c774;   /* bright grass green */
            --grass-dk  : #2ecc71;

            /* ‚îÄ‚îÄ Cabin colours (the 6 ferris cabins) ‚îÄ‚îÄ */
            --cabin-red    : #ff6b6b;   /* cabin 1 */
            --cabin-red-dk : #e74c3c;
            --cabin-grn    : #34d399;   /* cabin 2 */
            --cabin-grn-dk : #059669;
            --cabin-yel    : #fbbf24;   /* cabin 3 */
            --cabin-yel-dk : #d97706;
            --cabin-blu    : #60a5fa;   /* cabin 4 */
            --cabin-blu-dk : #3b82f6;
            --cabin-pur    : #a78bfa;   /* cabin 5 */
            --cabin-pur-dk : #7c3aed;
            --cabin-ora    : #fb923c;   /* cabin 6 */
            --cabin-ora-dk : #ea580c;

            /* ‚îÄ‚îÄ Balloon strip ‚îÄ‚îÄ */
            --balloon-coral : #ff6b6b;
            --balloon-gold  : #f9a825;

            /* ‚îÄ‚îÄ Semantic (mapped to cabin colours) ‚îÄ‚îÄ */
            --primary       : var(--cabin-pur);          /* purple ‚Äì main actions */
            --primary-dk    : var(--cabin-pur-dk);
            --danger        : var(--cabin-red);
            --danger-dk     : var(--cabin-red-dk);
            --success       : var(--cabin-grn);
            --success-dk    : var(--cabin-grn-dk);
            --warning       : var(--cabin-yel);
            --warning-dk    : var(--cabin-yel-dk);
            --info          : var(--cabin-blu);
            --info-dk       : var(--cabin-blu-dk);
            --whatsapp      : #25D366;

            /* ‚îÄ‚îÄ Surfaces ‚îÄ‚îÄ */
            --card-bg       : #ffffff;
            --card-alt      : #f0faf5;   /* very light green tint */
            --input-bg      : #f4faf7;

            /* ‚îÄ‚îÄ Text ‚îÄ‚îÄ */
            --text          : #2c3e50;
            --text-light    : #7f8c8d;

            /* ‚îÄ‚îÄ Borders ‚îÄ‚îÄ */
            --border        : rgba(0,0,0,0.08);
            --border-color  : #c8e6d8;   /* soft green border */

            /* ‚îÄ‚îÄ Shadows ‚îÄ‚îÄ */
            --shadow-sm     : 0 2px 8px  rgba(0,0,0,0.07);
            --shadow-md     : 0 6px 20px rgba(0,0,0,0.10);
            --shadow-lg     : 0 12px 36px rgba(0,0,0,0.13);

            /* ‚îÄ‚îÄ Radius ‚îÄ‚îÄ */
            --radius-sm : 10px;
            --radius-md : 16px;
            --radius-lg : 24px;
            --radius-xl : 32px;

            /* ‚îÄ‚îÄ Motion ‚îÄ‚îÄ */
            --ease      : cubic-bezier(0.4, 0, 0.2, 1);
            --transition: all 0.28s var(--ease);
        }

        /* ============================================================
           RESET
           ============================================================ */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0; padding: 0;
            font-family: 'Tajawal', sans-serif;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }
        html { scroll-behavior: smooth; }

        body {
            /* continuous sky gradient ‚Äì same as scene-container */
            background: linear-gradient(180deg,
                var(--sky-top)   0%,
                var(--sky-mid)  45%,
                var(--sky-light) 72%,
                #e8f6f0         100%);
            background-attachment: fixed;
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            font-size: 16px;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* scrollbar ‚Äì green to match grass */
        ::-webkit-scrollbar        { width: 6px; }
        ::-webkit-scrollbar-track  { background: transparent; }
        ::-webkit-scrollbar-thumb  { background: var(--grass); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--grass-dk); }

        /* ============================================================
           KEYFRAMES
           ============================================================ */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(18px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to   { opacity: 1; }
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.92); }
            to   { opacity: 1; transform: scale(1); }
        }
        @keyframes pulseRing {
            0%   { transform: scale(0.96); box-shadow: 0 0 0 0 rgba(167,139,250,0.45); }
            70%  { transform: scale(1);    box-shadow: 0 0 0 18px transparent; }
            100% { transform: scale(0.96); box-shadow: 0 0 0 0 transparent; }
        }
        @keyframes timerGlow {
            0%, 100% { text-shadow: 0 0 8px  rgba(167,139,250,0.35); }
            50%      { text-shadow: 0 0 22px rgba(167,139,250,0.55); }
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50%      { transform: scale(1.25); }
        }
        @keyframes floatCloud {
            0%   { left: -200px; }
            100% { left: 120%; }
        }
        @keyframes floatBalloon {
            0%   { right: -100px; transform: translateY(0); }
            50%  { transform: translateY(-20px); }
            100% { right: 110%; transform: translateY(0); }
        }
        @keyframes wheelRotate  { 100% { transform: rotate(360deg); } }
        @keyframes cabinRotate  { 100% { transform: rotate(-360deg); } }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50%      { transform: scale(1.2); }
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        /* confetti dots that float upward ‚Äì carnival feel on the scene */
        @keyframes confettiFloat {
            0%   { transform: translateY(0) rotate(0deg);   opacity: 0.9; }
            100% { transform: translateY(-160px) rotate(360deg); opacity: 0; }
        }

        /* ============================================================
           HEADER
           ============================================================ */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            /* candy-stripe bottom border using the cabin colours */
            border-bottom: 4px solid transparent;
            border-image: linear-gradient(90deg,
                var(--cabin-red),
                var(--cabin-yel),
                var(--cabin-grn),
                var(--cabin-blu),
                var(--cabin-pur),
                var(--cabin-ora),
                var(--cabin-red)
            ) 1;
            box-shadow: var(--shadow-sm);
        }

        .header-top {
            /* rainbow stripe bar */
            background: linear-gradient(90deg,
                var(--cabin-red),
                var(--cabin-ora),
                var(--cabin-yel),
                var(--cabin-grn),
                var(--cabin-blu),
                var(--cabin-pur));
            padding: 5px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.82rem;
            color: #fff;
            font-weight: 600;
        }
        .header-top .date-icon { color: #fff; margin-left: 6px; }

        .header-content {
            padding: 12px 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* logo ring ‚Äì conic gradient like a spinning wheel */
        .logo-ring {
            position: relative;
            width: 52px; height: 52px;
            flex-shrink: 0;
        }
        .logo-ring::before {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            background: conic-gradient(
                var(--cabin-red),
                var(--cabin-ora),
                var(--cabin-yel),
                var(--cabin-grn),
                var(--cabin-blu),
                var(--cabin-pur),
                var(--cabin-red)
            );
            z-index: 0;
        }
        .logo-ring img {
            position: relative; z-index: 1;
            width: 100%; height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #fff;
        }

        .header-text h1 {
            color: var(--cabin-pur-dk);
            font-weight: 800;
            font-size: 1.35rem;
        }
        .header-text h1 .icon-park { margin-left: 6px; font-size: 1.1rem; }
        .header-text p {
            color: var(--text-light);
            font-size: 0.82rem;
            font-weight: 500;
            margin-top: 1px;
        }

        /* Nav pills */
        .btn-stats, .btn-logout {
            padding: 6px 15px;
            border-radius: 20px;
            border: 2px solid transparent;
            background: #fff;
            font-size: 0.82rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: var(--shadow-sm);
        }
        .btn-stats            { color: var(--cabin-ora-dk); border-color: var(--cabin-ora); }
        .btn-stats i          { color: var(--cabin-ora-dk); }
        .btn-stats:hover      { background: var(--cabin-ora); color: #fff; }
        .btn-stats:hover i    { color: #fff; }

        .btn-logout           { color: var(--cabin-red-dk); border-color: var(--cabin-red); }
        .btn-logout i         { color: var(--cabin-red-dk); }
        .btn-logout:hover     { background: var(--cabin-red-dk); color: #fff; }
        .btn-logout:hover i   { color: #fff; }

        /* ============================================================
           LOGIN SCREEN
           ============================================================ */
        #login-screen {
            position: fixed; inset: 0;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            /* same sky as body */
            background: linear-gradient(180deg,
                var(--sky-top)   0%,
                var(--sky-mid)  50%,
                var(--sky-light) 100%);
            overflow: hidden;
        }
        /* two big blurred cabin-colour blobs */
        #login-screen::before {
            content: '';
            position: absolute;
            width: 420px; height: 420px;
            border-radius: 50%;
            background: var(--cabin-red);
            opacity: 0.15;
            top: -130px; right: -130px;
            filter: blur(70px);
            pointer-events: none;
        }
        #login-screen::after {
            content: '';
            position: absolute;
            width: 380px; height: 380px;
            border-radius: 50%;
            background: var(--cabin-grn);
            opacity: 0.18;
            bottom: -110px; left: -110px;
            filter: blur(60px);
            pointer-events: none;
        }

        .login-card {
            position: relative; z-index: 1;
            background: #fff;
            border: 3px solid var(--cabin-grn);
            border-radius: var(--radius-xl);
            padding: 3.2rem 2.2rem;
            width: 90%; max-width: 420px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            animation: scaleIn 0.45s var(--ease);
        }

        .login-logo-wrap {
            width: 90px; height: 90px;
            margin: 0 auto 18px;
            border-radius: 50%;
            padding: 3px;
            background: conic-gradient(
                var(--cabin-red),var(--cabin-ora),var(--cabin-yel),
                var(--cabin-grn),var(--cabin-blu),var(--cabin-pur),var(--cabin-red)
            );
        }
        .login-logo-wrap img {
            width: 100%; height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #fff;
        }

        .login-card h2 {
            color: var(--cabin-pur-dk);
            font-weight: 800;
            font-size: 1.55rem;
            margin-bottom: 4px;
        }
        .login-card > p {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 26px;
        }

        .login-input {
            width: 100%;
            padding: 15px;
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 1.4rem;
            text-align: center;
            margin-bottom: 20px;
            letter-spacing: 10px;
            font-weight: 700;
            color: var(--text);
            transition: var(--transition);
        }
        .login-input::placeholder { color: #a8c8b8; letter-spacing: 6px; }
        .login-input:focus {
            border-color: var(--cabin-pur);
            box-shadow: 0 0 0 3px rgba(167,139,250,0.20);
            background: #fff;
        }

        /* ============================================================
           LAYOUT
           ============================================================ */
        main {
            flex: 1;
            padding: 1.8rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            position: relative;
            z-index: 1;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.8rem;
        }
        @media (min-width: 992px) {
            .dashboard-grid { grid-template-columns: 380px 1fr; }
        }

        /* ============================================================
           CARDS
           ============================================================ */
        .card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 1.7rem;
            box-shadow: var(--shadow-md);
            margin-bottom: 1.4rem;
            animation: fadeUp 0.4s var(--ease) both;
            transition: var(--transition);
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            border-color: var(--cabin-grn);
        }

        /* ============================================================
           FORMS
           ============================================================ */
        .form-group       { margin-bottom: 1rem; }
        .form-group label {
            display: block;
            margin-bottom: 0.45rem;
            font-weight: 700;
            font-size: 0.88rem;
            color: var(--text-light);
        }
        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            color: var(--text);
            transition: var(--transition);
        }
        .form-control::placeholder { color: #a8c8b8; }
        .form-control:focus {
            border-color: var(--cabin-blu);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(96,165,250,0.18);
        }

        /* ============================================================
           BUTTONS  ‚Äì each maps to a cabin colour
           ============================================================ */
        .btn {
            padding: 12px 22px;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 700;
            font-size: 0.92rem;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        .btn:active { transform: scale(0.96) !important; }
        @media (min-width: 768px) { .btn { width: auto; min-width: 110px; } }

        /* primary = purple cabin */
        .btn-primary {
            background: linear-gradient(135deg, var(--cabin-pur), var(--cabin-pur-dk));
            color: #fff;
            box-shadow: 0 4px 14px rgba(167,139,250,0.40);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(167,139,250,0.45);
            filter: brightness(1.08);
        }

        /* danger = red cabin */
        .btn-danger {
            background: linear-gradient(135deg, var(--cabin-red), var(--cabin-red-dk));
            color: #fff;
            box-shadow: 0 4px 14px rgba(255,107,107,0.38);
        }
        .btn-danger:hover { transform: translateY(-2px); filter: brightness(1.08); }

        /* warning = yellow cabin */
        .btn-warning {
            background: linear-gradient(135deg, var(--cabin-yel), var(--cabin-yel-dk));
            color: #fff;
            box-shadow: 0 4px 14px rgba(251,191,36,0.40);
        }
        .btn-warning:hover { transform: translateY(-2px); filter: brightness(1.08); }

        /* success = green cabin */
        .btn-success {
            background: linear-gradient(135deg, var(--cabin-grn), var(--cabin-grn-dk));
            color: #fff;
            box-shadow: 0 4px 14px rgba(52,211,153,0.38);
        }
        .btn-success:hover { transform: translateY(-2px); filter: brightness(1.08); }

        /* whatsapp */
        .btn-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C4E);
            color: #fff;
            box-shadow: 0 4px 14px rgba(37,211,102,0.35);
        }
        .btn-whatsapp:hover { transform: translateY(-2px); filter: brightness(1.08); }

        /* outline = purple border */
        .btn-outline {
            background: #fff;
            border: 2px solid var(--cabin-pur);
            color: var(--cabin-pur-dk);
        }
        .btn-outline:hover { background: var(--cabin-pur); color: #fff; }

        /* ============================================================
           SEARCH
           ============================================================ */
        .search-box {
            background: #fff;
            border: 2px solid var(--border-color);
            padding: 0.7rem 1.1rem;
            border-radius: 50px;
            margin-bottom: 1.2rem;
            display: flex;
            gap: 12px;
            align-items: center;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }
        .search-box:focus-within {
            border-color: var(--cabin-blu);
            box-shadow: 0 0 0 3px rgba(96,165,250,0.15), var(--shadow-sm);
        }
        .search-box input {
            border: none; flex: 1;
            background: transparent;
            font-size: 0.95rem;
            color: var(--text);
        }
        .search-box input::placeholder { color: #a8c8b8; }
        .search-box i { color: var(--cabin-blu-dk); font-size: 1rem; }

        /* ============================================================
           KID CARDS
           ============================================================ */
        .kid-card {
            background: #fff;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 1rem 1.15rem;
            margin-bottom: 0.85rem;
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
            animation: fadeUp 0.38s var(--ease) both;
            box-shadow: var(--shadow-sm);
        }
        .kid-card:hover {
            transform: translateX(-3px);
            box-shadow: var(--shadow-md);
        }

        /* RTL accent stripe on right ‚Äì cabin colours */
        .kid-card::before {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 6px; height: 100%;
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
        }
        .kid-card.in-status::before     { background: var(--cabin-grn); }
        .kid-card.paused-status::before { background: var(--cabin-yel); }
        .kid-card.out-status::before    { background: #ccc; }

        @media (min-width: 600px) {
            .kid-card { flex-direction: row; justify-content: space-between; align-items: center; }
        }

        .kid-info h3 {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        /* ID badge = blue cabin */
        .kid-id-badge {
            background: linear-gradient(135deg, var(--cabin-blu), var(--cabin-blu-dk));
            color: #fff;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.78rem;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .kid-meta { display: flex; gap: 7px; flex-wrap: wrap; margin-bottom: 6px; }
        .kid-tag {
            background: var(--card-alt);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            padding: 4px 11px;
            border-radius: 20px;
            font-size: 0.82rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        /* product tag = orange cabin */
        .kid-tag.product-tag {
            background: #fff3e0;
            border-color: rgba(251,146,60,0.35);
            color: var(--cabin-ora-dk);
        }

        /* timer pill = red cabin colours */
        .timer-display {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: var(--cabin-red-dk);
            font-size: 0.95rem;
            background: linear-gradient(135deg, #fff0f0, #ffe0e0);
            border: 2px solid var(--cabin-red);
            padding: 5px 13px;
            border-radius: 20px;
            display: inline-block;
            letter-spacing: 1px;
            box-shadow: 0 2px 6px rgba(255,107,107,0.18);
        }
        .timer-paused {
            color: var(--cabin-yel-dk) !important;
            background: linear-gradient(135deg, #fffbec, #fff3cc) !important;
            border-color: var(--cabin-yel) !important;
            box-shadow: 0 2px 6px rgba(251,191,36,0.22) !important;
        }

        .controls { display: flex; gap: 7px; flex-wrap: wrap; justify-content: flex-end; width: 100%; }
        @media (min-width: 600px) { .controls { width: auto; } }
        .controls .btn { padding: 8px 13px; font-size: 0.82rem; border-radius: 8px; min-width: auto; width: auto; }

        /* ============================================================
           NOTIFICATION BADGE
           ============================================================ */
        .notification-badge {
            background: var(--cabin-red-dk);
            color: #fff;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.72rem;
            position: absolute;
            top: -5px; right: -5px;
            font-weight: 800;
            box-shadow: 0 2px 6px rgba(231,76,60,0.4);
            animation: bounce 0.5s;
            border: 2px solid #fff;
        }

        /* ============================================================
           CHAT
           ============================================================ */
        .chat-container {
            margin-top: 1.2rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            overflow: hidden;
            background: #fff;
        }
        .chat-messages {
            height: 230px;
            overflow-y: auto;
            padding: 16px;
            background: var(--card-alt);   /* light green tint */
            display: flex;
            flex-direction: column;
            gap: 9px;
        }
        .message {
            max-width: 78%;
            padding: 10px 16px;
            border-radius: 18px;
            font-size: 0.9rem;
            line-height: 1.5;
            box-shadow: var(--shadow-sm);
        }
        /* parent msg = white bubble */
        .message.parent {
            align-self: flex-start;
            background: #fff;
            color: var(--text);
            border-bottom-right-radius: 4px;
            border: 1px solid var(--border-color);
        }
        /* admin msg = purple cabin gradient */
        .message.admin {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--cabin-pur), var(--cabin-pur-dk));
            color: #fff;
            border-bottom-left-radius: 4px;
        }
        .message .sender-name {
            font-size: 0.68rem;
            opacity: 0.6;
            margin-bottom: 3px;
            display: block;
            font-weight: 700;
            letter-spacing: 0.4px;
        }
        .chat-input-area {
            padding: 11px;
            background: #fff;
            display: flex;
            gap: 9px;
            border-top: 1px solid var(--border-color);
        }
        .chat-input-area input { background: var(--input-bg); border-color: var(--border-color); }

        /* ============================================================
           PARENT VIEW  ‚Äì  animated amusement-park scene
           ============================================================ */
        .parent-view-container {
            display: flex;
            flex-direction: column;
            min-height: 85vh;
        }

        /* ‚îÄ‚îÄ scene background ‚îÄ‚îÄ */
        .scene-container {
            position: fixed; inset: 0;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
            background: linear-gradient(180deg,
                var(--sky-top)   0%,
                var(--sky-mid)  45%,
                var(--sky-light) 72%,
                #e8f6f0         100%);
        }

        /* ‚îÄ‚îÄ confetti dots (replace dark "stars") ‚îÄ‚îÄ */
        .star {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            animation: confettiFloat var(--dur) ease-out infinite;
            animation-delay: var(--delay);
        }

        /* ‚îÄ‚îÄ bright white clouds ‚îÄ‚îÄ */
        .cloud {
            position: absolute;
            background: #fff;
            border-radius: 100px;
            opacity: 0.88;
            animation: floatCloud linear infinite;
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        }
        .cloud::after, .cloud::before {
            content: ''; position: absolute;
            background: #fff; border-radius: 50%;
        }
        .cloud-1 { width: 110px; height: 42px; top: 10%; left: -130px; animation-duration: 26s; }
        .cloud-1::after  { width: 42px; height: 42px; top: -20px; left: 16px; }
        .cloud-1::before { width: 52px; height: 52px; top: -30px; left: 38px; }
        .cloud-2 { width: 170px; height: 60px; top: 22%; left: -190px; animation-duration: 34s; animation-delay: 5s; opacity: 0.75; }
        .cloud-2::after  { width: 60px; height: 60px; top: -28px; left: 28px; }
        .cloud-2::before { width: 74px; height: 74px; top: -42px; left: 60px; }

        /* ‚îÄ‚îÄ hot-air balloon ‚îÄ‚îÄ */
        .balloon {
            position: absolute;
            width: 60px; height: 80px;
            top: 13%; right: -100px;
            animation: floatBalloon 40s linear infinite;
            z-index: 0;
        }
        .balloon-top {
            width: 60px; height: 60px;
            background: linear-gradient(135deg, var(--balloon-coral), var(--balloon-gold));
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            box-shadow: 0 4px 18px rgba(255,107,107,0.32);
        }
        .balloon-top::before {
            content: ''; position: absolute;
            width: 18px; height: 54px;
            background: rgba(255,255,255,0.22);
            left: 20px; border-radius: 50%;
        }
        .balloon-basket {
            width: 22px; height: 15px;
            background: var(--cabin-ora-dk);
            margin: 5px auto 0;
            border-radius: 4px;
            position: relative;
        }
        .balloon-basket::before, .balloon-basket::after {
            content: ''; position: absolute;
            width: 2px; height: 11px;
            background: var(--text-light);
            top: -11px;
        }
        .balloon-basket::before { left: 3px; }
        .balloon-basket::after  { right: 3px; }

        /* ‚îÄ‚îÄ roller-coaster path ‚îÄ‚îÄ */
        .coaster-container {
            position: absolute;
            bottom: 65px; left: -50px;
            width: 100%; height: 200px;
            z-index: 0;
            opacity: 0.72;
        }

        /* ‚îÄ‚îÄ ferris wheel ‚îÄ‚îÄ */
        .ferris-wheel-container {
            position: absolute;
            bottom: 44px; left: 68%;
            transform: translateX(-50%) scale(0.67);
            width: 300px; height: 300px;
            z-index: 1;
        }
        @media (min-width: 768px) {
            .ferris-wheel-container { bottom: 72px; left: 50%; transform: translateX(-50%) scale(0.88); }
        }
        .wheel {
            width: 300px; height: 300px;
            border: 4px solid #9fb8c4;
            border-radius: 50%;
            position: relative;
            animation: wheelRotate 10s linear infinite;
            /* outer ring highlight */
            box-shadow: 0 0 0 6px rgba(255,255,255,0.45),
                        0 4px 20px rgba(0,0,0,0.12);
        }
        .wheel::before { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 4px; background: #9fb8c4; }
        .wheel::after  { content: ''; position: absolute; top: 0; left: 50%; width: 4px; height: 100%; background: #9fb8c4; }
        .spoke-x { position: absolute; top: 0; left: 50%; width: 4px; height: 100%; background: #9fb8c4; transform: rotate(45deg); }
        .spoke-y { position: absolute; top: 0; left: 50%; width: 4px; height: 100%; background: #9fb8c4; transform: rotate(-45deg); }

        .cabin {
            width: 38px; height: 48px;
            position: absolute;
            transform-origin: top center;
            animation: cabinRotate 10s linear infinite reverse;
        }
        .cabin-box {
            width: 100%; height: 100%;
            border-radius: 10px 10px 5px 5px;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.12),
                        2px 3px 8px rgba(0,0,0,0.18);
        }
        .cabin-box::before {
            content: ''; position: absolute;
            top: -10px; left: 50%;
            width: 4px; height: 10px;
            background: #7f8c8d;
            transform: translateX(-50%);
        }
        /* positions & colours match the :root cabin vars */
        .cabin:nth-child(1) { top: -24px; left: 131px; } .cabin:nth-child(1) .cabin-box { background: linear-gradient(150deg, var(--cabin-red), var(--cabin-red-dk)); }
        .cabin:nth-child(2) { top:  34px; right: 34px;  } .cabin:nth-child(2) .cabin-box { background: linear-gradient(150deg, var(--cabin-grn), var(--cabin-grn-dk)); }
        .cabin:nth-child(3) { bottom: 34px; right: 34px;} .cabin:nth-child(3) .cabin-box { background: linear-gradient(150deg, var(--cabin-yel), var(--cabin-yel-dk)); }
        .cabin:nth-child(4) { bottom: -24px; left: 131px; } .cabin:nth-child(4) .cabin-box { background: linear-gradient(150deg, var(--cabin-blu), var(--cabin-blu-dk)); }
        .cabin:nth-child(5) { bottom: 34px; left: 34px; } .cabin:nth-child(5) .cabin-box { background: linear-gradient(150deg, var(--cabin-pur), var(--cabin-pur-dk)); }
        .cabin:nth-child(6) { top:  34px; left: 34px;   } .cabin:nth-child(6) .cabin-box { background: linear-gradient(150deg, var(--cabin-ora), var(--cabin-ora-dk)); }

        /* stand = warm grey */
        .stand {
            position: absolute; bottom: -40px; left: 50%;
            transform: translateX(-50%);
            width: 0; height: 0;
            border-left:  100px solid transparent;
            border-right: 100px solid transparent;
            border-bottom: 155px solid #95a5a6;
            z-index: -1;
        }
        .stand::after {
            content: '';
            position: absolute;
            top: 155px; left: -120px;
            width: 240px; height: 18px;
            background: #7f8c8d;
            border-radius: 9px;
        }

        /* ‚îÄ‚îÄ ground hill ‚Äì grass green ‚îÄ‚îÄ */
        .ground-hill {
            position: absolute;
            bottom: -50px; left: 0;
            width: 100%; height: 120px;
            background: linear-gradient(180deg, var(--grass) 0%, var(--grass-dk) 100%);
            border-radius: 50% 50% 0 0 / 100% 100% 0 0;
            z-index: 1;
            box-shadow: 0 -4px 16px rgba(0,0,0,0.10);
        }

        /* ‚îÄ‚îÄ parent frosted card ‚îÄ‚îÄ */
        .parent-view-card {
            background: rgba(255,255,255,0.93);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 2px solid rgba(255,255,255,0.7);
            text-align: center;
            border-radius: var(--radius-xl);
            padding: 2.4rem 1.5rem;
            box-shadow: var(--shadow-lg);
            margin-top: 2rem;
            position: relative; z-index: 10;
            animation: fadeUp 0.55s var(--ease);
        }

        /* timer circle */
        .parent-timer-circle {
            width: 220px; height: 220px;
            margin: 24px auto;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .parent-timer-circle::before {
            content: '';
            position: absolute; inset: 0;
            border-radius: 50%;
            background: rgba(167,139,250,0.10);
            animation: pulseRing 2.2s infinite;
        }
        .parent-timer-circle::after {
            content: '';
            position: absolute; inset: 8px;
            border-radius: 50%;
            border: 4px solid var(--cabin-pur);
            opacity: 0.22;
        }
        .timer-inner {
            position: relative; z-index: 1;
            background: #fff;
            width: 178px; height: 178px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 4px solid var(--cabin-pur);
            box-shadow: 0 4px 24px rgba(167,139,250,0.22),
                        inset 0 2px 12px rgba(0,0,0,0.05);
        }
        .timer-text-big {
            font-family: 'Orbitron', monospace;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--cabin-pur-dk);
            letter-spacing: 2px;
            animation: timerGlow 2.2s ease-in-out infinite;
        }

        /* child number pill = blue cabin */
        .child-number-display {
            background: linear-gradient(135deg, var(--cabin-blu), var(--cabin-blu-dk));
            color: #fff;
            padding: 7px 26px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 800;
            display: inline-block;
            margin-top: 8px;
            letter-spacing: 3px;
            box-shadow: 0 4px 14px rgba(96,165,250,0.35);
        }

        .status-badge {
            display: inline-block;
            padding: 5px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.87rem;
        }
        .status-badge-in     { background: #e8faf4; color: var(--cabin-grn-dk); border: 2px solid var(--cabin-grn); }
        .status-badge-paused { background: #fff8e1; color: var(--cabin-yel-dk); border: 2px solid var(--cabin-yel); }

        /* live cost = red cabin */
        #live-cost {
            color: var(--cabin-red-dk);
            font-weight: 800;
            font-size: 2.2rem;
        }

        .parent-child-name  { font-size: 1.9rem; font-weight: 800; color: var(--text); margin: 12px 0 4px; }
        .parent-snack-text  { color: var(--text-light); font-size: 1rem; margin-bottom: 10px; }
        .entry-time-row     { color: var(--text-light); font-size: 0.88rem; margin-top: 16px; }
        .entry-time-row span{ color: var(--cabin-pur-dk); font-weight: 700; }
        .cost-row           { font-size: 1.05rem; color: var(--text-light); margin: 16px 0; font-weight: 600; }

        /* session-ended card */
        #session-ended-card              { border-color: var(--cabin-red) !important; }
        .session-ended-title             { color: var(--cabin-red-dk); font-size: 1.6rem; font-weight: 800; margin-bottom: 8px; }
        .session-ended-sub               { color: var(--text-light); font-size: 1.05rem; }
        .final-cost-big                  { font-size: 2.6rem; font-weight: 800; color: var(--text); margin: 16px 0; }
        .final-cost-big span             { color: var(--cabin-red-dk); }
        .thanks-text                     { font-size: 1.1rem; font-weight: 700; color: var(--cabin-grn-dk); margin-top: 14px; }
        .tagline-box                     { margin-top: 22px; padding-top: 16px; border-top: 2px dashed var(--cabin-grn); }
        .tagline-box h4                  { color: var(--text-light); font-weight: 500; font-size: 0.9rem; margin-bottom: 3px; }
        .tagline-box p                   { color: var(--cabin-red-dk); font-size: 1.05rem; font-style: italic; font-weight: 700; }

        /* ============================================================
           FINANCIAL VIEW
           ============================================================ */
        .financial-container {
            background: linear-gradient(180deg,
                rgba(135,206,235,0.12) 0%,
                rgba(232,246,240,0.45) 100%);
            padding: 1.5rem;
            border-radius: var(--radius-xl);
            min-height: 85vh;
        }
        /* grand total box = green cabin gradient */
        .grand-total-box {
            background: linear-gradient(135deg, var(--cabin-grn), var(--cabin-grn-dk));
            color: #fff;
            padding: 2.2rem;
            border-radius: var(--radius-lg);
            text-align: center;
            margin-bottom: 1.6rem;
            box-shadow: var(--shadow-lg);
            position: relative; overflow: hidden;
        }
        .grand-total-box::before {
            content: '';
            position: absolute;
            top: -50px; right: -50px;
            width: 160px; height: 160px;
            border-radius: 50%;
            background: rgba(255,255,255,0.12);
        }
        .grand-total-box::after {
            content: '';
            position: absolute;
            bottom: -40px; left: -40px;
            width: 120px; height: 120px;
            border-radius: 50%;
            background: rgba(255,255,255,0.08);
        }
        .grand-total-box h2 {
            position: relative;
            color: rgba(255,255,255,0.85);
            font-weight: 600; font-size: 1rem;
            margin-bottom: 4px;
        }
        .grand-total-box .big-number {
            position: relative;
            font-size: 3rem; font-weight: 800;
            color: #fff;
            font-family: 'Orbitron', monospace;
            text-shadow: 0 2px 12px rgba(0,0,0,0.18);
        }

        .day-group {
            background: #fff;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            margin-bottom: 1.1rem;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        /* day-header = green cabin gradient */
        .day-header {
            background: linear-gradient(90deg, var(--cabin-grn), var(--grass));
            color: #fff;
            padding: 12px 18px;
            font-weight: 700; font-size: 0.88rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .day-header .day-label { color: #fff; }

        .record-row {
            padding: 12px 18px;
            border-bottom: 1px solid #eef5f2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }
        .record-row:hover           { background: var(--card-alt); }
        .record-row:last-of-type    { border-bottom: none; }
        .record-name                { font-weight: 700; color: var(--text); display: block; font-size: 0.92rem; }
        .record-time                { font-size: 0.78rem; color: var(--text-light); margin-top: 2px; display: block; }
        .record-cost                { font-weight: 800; color: var(--cabin-red-dk); font-size: 1.05rem; }

        /* day total row */
        .day-total {
            background: linear-gradient(90deg, rgba(52,211,153,0.10), rgba(46,204,113,0.06));
            border-top: 2px solid var(--cabin-grn);
            color: var(--cabin-grn-dk);
            padding: 11px 18px;
            font-weight: 800;
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        /* ============================================================
           MODALS
           ============================================================ */
        .modal {
            display: none;
            position: fixed; inset: 0;
            background: rgba(44,62,80,0.62);
            backdrop-filter: blur(5px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.2s;
        }
        .modal-content {
            background: #fff;
            border: 2px solid var(--border-color);
            padding: 2.3rem;
            border-radius: var(--radius-xl);
            width: 90%; max-width: 450px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            animation: scaleIn 0.28s var(--ease);
            color: var(--text);
        }
        .modal-content h2 { color: var(--text); margin-bottom: 10px; font-size: 1.35rem; }

        .modal-chat-content {
            max-width: 600px;
            height: 85vh;
            display: flex;
            flex-direction: column;
            padding: 1.3rem;
            text-align: right;
            border-color: var(--cabin-pur);
        }
        .modal-chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        .modal-chat-header h3 { color: var(--text); font-size: 1.05rem; }
        .modal-close-btn {
            background: none; border: none;
            font-size: 1.6rem; cursor: pointer;
            color: var(--text-light);
            transition: color 0.2s;
        }
        .modal-close-btn:hover { color: var(--cabin-red-dk); }

        /* finance quick grid */
        .finance-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
        @media (max-width: 399px) { .finance-grid { grid-template-columns: 1fr; } }
        .finance-item {
            background: var(--card-alt);
            border: 2px solid var(--border-color);
            padding: 16px 10px;
            border-radius: var(--radius-sm);
            text-align: center;
        }
        .finance-item h4     { color: var(--text-light); font-size: 0.82rem; margin-bottom: 5px; font-weight: 600; }
        .finance-item .money { font-size: 1.3rem; font-weight: 800; color: var(--cabin-grn-dk); font-family: 'Orbitron', monospace; }

        /* checkout modal */
        .checkout-duration       { font-size: 0.9rem; color: var(--text-light); margin-bottom: 8px; }
        .checkout-duration strong{ color: var(--text); font-family: 'Orbitron', monospace; }
        .checkout-price-big      { font-size: 2.5rem; font-weight: 800; color: var(--text); margin: 12px 0; }
        .checkout-price-note     { font-size: 0.82rem; color: var(--text-light); margin-bottom: 1.2rem; }
        .modal-btn-row           { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }

        /* ============================================================
           SECTION TITLES
           ============================================================ */
        .section-title {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--text);
            font-weight: 800;
            position: relative;
            padding-right: 14px;
        }
        /* the little accent bar ‚Äì red‚Üíyellow (balloon strip) */
        .section-title::before {
            content: '';
            position: absolute;
            right: 0; top: 50%;
            transform: translateY(-50%);
            width: 5px; height: 24px;
            background: linear-gradient(180deg, var(--cabin-red), var(--cabin-yel));
            border-radius: 3px;
        }
        .section-title.muted         { color: var(--text-light); }
        .section-title.muted::before { background: linear-gradient(180deg, var(--cabin-grn), var(--grass-dk)); }

        .card-title-coral { color: var(--cabin-red-dk); font-size: 1.2rem; font-weight: 800; margin-bottom: 1.2rem; }

        /* ============================================================
           QR RESULT BLOCK
           ============================================================ */
        #new-child-qr {
            margin-top: 1.4rem;
            padding-top: 1.1rem;
            border-top: 2px dashed var(--border-color);
        }
        .qr-success-title { color: var(--cabin-grn-dk); margin-bottom: 6px; font-size: 1.05rem; font-weight: 700; }
        .qr-name-label    { font-weight: 700; color: var(--text); margin-bottom: 8px; font-size: 0.95rem; }
        #qr-code          { display: flex; justify-content: center; margin: 12px 0; }
        #qr-code img, #qr-code canvas {
            border-radius: var(--radius-sm);
            border: 2px solid var(--border-color);
        }
        .test-link {
            font-size: 0.82rem;
            color: var(--cabin-blu-dk);
            text-decoration: none;
            cursor: pointer;
            margin-top: 8px; display: block;
            font-weight: 600;
            transition: color 0.2s;
        }
        .test-link:hover { color: var(--cabin-pur-dk); }
        .qr-btn-stack    { display: grid; gap: 8px; margin-top: 16px; }

        /* ============================================================
           FOOTER
           ============================================================ */
        .developer-footer {
            margin-top: auto;
            text-align: center;
            padding: 1.4rem;
            border-top: 3px solid transparent;
            border-image: linear-gradient(90deg,
                var(--cabin-red),var(--cabin-ora),var(--cabin-yel),
                var(--cabin-grn),var(--cabin-blu),var(--cabin-pur),var(--cabin-red)
            ) 1;
            background: rgba(255,255,255,0.88);
            backdrop-filter: blur(8px);
            position: relative; z-index: 50;
        }
        .developer-footer p      { color: var(--text-light); font-size: 0.88rem; }
        .developer-footer p + p { margin-top: 2px; color: var(--text); font-weight: 700; }
        .heart-beat              { display: inline-block; animation: heartbeat 1.4s infinite; color: var(--cabin-red-dk); }
        .footer-links            { margin-top: 10px; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .footer-links a {
            color: var(--cabin-pur-dk);
            text-decoration: none;
            font-weight: 700; font-size: 0.82rem;
            padding: 6px 14px; border-radius: 20px;
            border: 2px solid var(--cabin-pur);
            background: #fff;
            transition: var(--transition);
            display: inline-flex; align-items: center; gap: 6px;
            box-shadow: var(--shadow-sm);
        }
        .footer-links a:hover { background: var(--cabin-pur); color: #fff; }
        .footer-links a i     { font-size: 0.78rem; }

        /* ============================================================
           TOAST
           ============================================================ */
        .toast-item {
            background: #fff;
            border: 2px solid var(--cabin-grn);
            color: var(--text);
            padding: 11px 20px;
            border-radius: var(--radius-sm);
            font-size: 0.88rem;
            font-weight: 700;
            box-shadow: var(--shadow-md);
            animation: slideDown 0.3s var(--ease);
            margin-bottom: 8px;
        }

        /* ============================================================
           RESPONSIVE
           ============================================================ */
        @media (max-width: 480px) {
            .header-text h1          { font-size: 1.1rem; }
            .header-content          { padding: 10px 12px; gap: 10px; }
            .card                    { padding: 1.15rem; }
            .kid-card                { padding: 0.95rem; }
            .parent-timer-circle     { width: 180px; height: 180px; }
            .timer-inner             { width: 150px; height: 150px; }
            .timer-text-big          { font-size: 1.7rem; }
            .parent-child-name       { font-size: 1.55rem; }
            main                     { padding: 1.1rem 0.7rem; }
        }

        /* ============================================================
           UTILITIES
           ============================================================ */
        .hidden       { display: none !important; }
        .text-center  { text-align: center; }
    </style>
</head>
<body>

    <!-- ============================================================
         üîê LOGIN SCREEN
         ============================================================ -->
    <div id="login-screen">
        <div class="login-card">
            <div class="login-logo-wrap">
                <img src="https://raw.githubusercontent.com/mohamednasr5/opera/main/01.png" alt="Logo">
            </div>
            <h2>ÿßÿ≥ÿ™ÿ∂ÿßŸÅÿ© ÿ£Ÿàÿ®ÿ±ÿß ÿπÿßÿ¥Ÿàÿ±</h2>
            <p>Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ŸÑŸÑÿØÿÆŸàŸÑ</p>
            <input type="password" id="login-pass" class="login-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeypress="handleEnter(event)">
            <button class="btn btn-primary" onclick="checkLogin()">ÿØÿÆŸàŸÑ ŸÑŸÑŸÜÿ∏ÿßŸÖ</button>
        </div>
    </div>

    <!-- ============================================================
         üè¢ HEADER
         ============================================================ -->
    <header>
        <div class="header-top">
            <span><i class="fas fa-calendar-alt date-icon"></i> <span id="header-datetime">...</span></span>
            <div id="admin-controls" style="display:flex; gap:8px;">
                <button id="nav-stats-btn" class="btn-stats hidden" onclick="openFinanceModal()">
                    <i class="fas fa-chart-pie"></i> ŸÖŸÑÿÆÿµ
                </button>
                <button id="nav-logout-btn" class="btn-logout hidden" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> ÿÆÿ±Ÿàÿ¨
                </button>
            </div>
        </div>
        <div class="header-content">
            <div class="logo-ring">
                <img src="https://raw.githubusercontent.com/mohamednasr5/opera/main/01.png" alt="Opera Ashour Logo">
            </div>
            <div class="header-text">
                <h1><span class="icon-park">üé™</span> ÿßÿ≥ÿ™ÿ∂ÿßŸÅÿ© ÿ£Ÿàÿ®ÿ±ÿß ÿπÿßÿ¥Ÿàÿ±</h1>
                <p id="header-subtitle">ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© Ÿàÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿßŸÑÿ∞ŸÉŸä</p>
            </div>
        </div>
    </header>

    <!-- ============================================================
         üìê MAIN APP
         ============================================================ -->
    <main id="app">

        <!-- ‚îÄ‚îÄ‚îÄ ADMIN VIEW ‚îÄ‚îÄ‚îÄ -->
        <div id="admin-view" class="hidden">
            <div class="dashboard-grid">

                <!-- Registration Panel -->
                <section class="card">
                    <h2 class="card-title-coral"><i class="fas fa-user-plus"></i> ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ∑ŸÅŸÑ ÿ¨ÿØŸäÿØ</h2>
                    <form id="checkin-form">
                        <div class="form-group">
                            <label><i class="fas fa-child" style="color:var(--gold); margin-left:6px;"></i> ÿßÿ≥ŸÖ ÿßŸÑÿ∑ŸÅŸÑ</label>
                            <input type="text" id="child-name" class="form-control" placeholder="ÿßÿ≥ŸÖ ÿßŸÑÿ∑ŸÅŸÑ" required>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-mobile-alt" style="color:var(--info); margin-left:6px;"></i> ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿßŸÑŸàÿßŸÑÿØ</label>
                            <input type="tel" id="parent-phone" class="form-control" placeholder="ŸÖÿ´ÿßŸÑ: 201xxxxxxxxx" required>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-shopping-bag" style="color:var(--success); margin-left:6px;"></i> ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)</label>
                            <input type="text" id="extra-item" class="form-control" placeholder="ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨ (ŸÖÿ´ŸÑÿßŸã: ŸÅÿ¥ÿßÿ±)">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-pound-sign" style="color:var(--warning); margin-left:6px;"></i> ÿ≥ÿπÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)</label>
                            <input type="number" id="extra-price" class="form-control" placeholder="ÿßŸÑÿ≥ÿπÿ± ÿ®ÿßŸÑÿ¨ŸÜŸäŸá">
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%; margin-top:6px;">
                            <i class="fas fa-sign-in-alt"></i> ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ
                        </button>
                    </form>

                    <!-- QR Result -->
                    <div id="new-child-qr" class="hidden">
                        <p class="qr-success-title">‚úÖ ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!</p>
                        <p id="qr-parent-name" class="qr-name-label"></p>
                        <div id="qr-code"></div>
                        <a id="test-link-btn" class="test-link" target="_blank">üîó ÿ™ÿ¨ÿ±ÿ®ÿ© ÿµŸÅÿ≠ÿ© ÿßŸÑŸàÿßŸÑÿØ</a>
                        <div class="qr-btn-stack">
                            <button class="btn btn-primary" onclick="copyLink()"><i class="fas fa-copy"></i> ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑</button>
                            <button class="btn btn-whatsapp" id="wa-btn-new"><i class="fab fa-whatsapp"></i> ÿ•ÿ±ÿ≥ÿßŸÑ Ÿàÿßÿ™ÿ≥ÿßÿ®</button>
                            <button class="btn btn-outline" onclick="closeQR()"><i class="fas fa-times"></i> ÿ•ÿ∫ŸÑÿßŸÇ</button>
                        </div>
                    </div>
                </section>

                <!-- Kids List Panel -->
                <section>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="admin-search" placeholder="ÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖÿå ÿßŸÑŸáÿßÿ™ŸÅÿå ÿ£Ÿà ÿßŸÑÿ±ŸÇŸÖ (####)">
                    </div>

                    <div class="card">
                        <h2 class="section-title">üë∂ ÿßŸÑÿ≠ÿßŸÑŸä (ŸÜÿ¥ÿ∑ / ŸÖÿ§ŸÇŸÅ)</h2>
                        <div id="kids-list-active"></div>
                    </div>

                    <div class="card" style="background: #f0faf5;">
                        <h2 class="section-title muted">üìú ÿ≥ÿ¨ŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</h2>
                        <div id="kids-list-history"></div>
                    </div>
                </section>
            </div>

            <div class="developer-footer">
                <p>ÿ®ÿ±ŸÖÿ¨ÿ© Ÿàÿ™ÿ∑ŸàŸäÿ± ÿ®ŸÉŸÑ ÿ≠ÿ® <span class="heart-beat">‚ù§Ô∏è</span></p>
                <p>ÿßŸÑŸÖŸáŸÜÿØÿ≥ ŸÖÿ≠ŸÖÿØ ÿ≠ŸÖÿßÿØ</p>
                <div class="footer-links">
                    <a href="tel:01279934735"><i class="fas fa-phone"></i> 01279934735</a>
                    <a href="https://www.facebook.com/en.mohamed.nasr" target="_blank"><i class="fab fa-facebook-f"></i> ŸÅŸäÿ≥ÿ®ŸàŸÉ</a>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ‚îÄ FINANCIAL VIEW ‚îÄ‚îÄ‚îÄ -->
        <div id="financial-view" class="hidden financial-container">
            <div class="grand-total-box">
                <h2><i class="fas fa-wallet"></i> ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿπÿßŸÖ</h2>
                <div class="big-number" id="grand-total-display">0.0 ÿ¨.ŸÖ</div>
            </div>
            <div id="financial-logs"></div>
            <div class="developer-footer" style="background: rgba(255,255,255,0.88);">
                <p>ÿ®ÿ±ŸÖÿ¨ÿ© Ÿàÿ™ÿ∑ŸàŸäÿ± ÿ®ŸÉŸÑ ÿ≠ÿ® <span class="heart-beat">‚ù§Ô∏è</span></p>
                <p>ÿßŸÑŸÖŸáŸÜÿØÿ≥ ŸÖÿ≠ŸÖÿØ ÿ≠ŸÖÿßÿØ</p>
                <div class="footer-links">
                    <a href="tel:01279934735"><i class="fas fa-phone"></i> 01279934735</a>
                    <a href="https://www.facebook.com/en.mohamed.nasr" target="_blank"><i class="fab fa-facebook-f"></i> ŸÅŸäÿ≥ÿ®ŸàŸÉ</a>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ‚îÄ PARENT VIEW ‚îÄ‚îÄ‚îÄ -->
        <div id="parent-view" class="hidden">
            <div class="parent-view-container">

                <!-- Animated Scene Background -->
                <div class="scene-container">
                    <!-- Stars -->
                    <div class="star" style="width:7px;height:7px;top:62%;left:14%;background:var(--cabin-red);--dur:4s;--delay:0s;"></div>
                    <div class="star" style="width:6px;height:6px;top:67%;left:32%;background:var(--cabin-yel);--dur:5s;--delay:0.8s;"></div>
                    <div class="star" style="width:8px;height:8px;top:55%;left:58%;background:var(--cabin-grn);--dur:4.5s;--delay:1.2s;"></div>
                    <div class="star" style="width:5px;height:5px;top:72%;left:78%;background:var(--cabin-pur);--dur:3.8s;--delay:0.4s;"></div>
                    <div class="star" style="width:6px;height:6px;top:60%;left:88%;background:var(--cabin-ora);--dur:5.2s;--delay:1.6s;"></div>
                    <div class="star" style="width:7px;height:7px;top:58%;left:48%;background:var(--cabin-blu);--dur:4.8s;--delay:0.6s;"></div>
                    <div class="star" style="width:5px;height:5px;top:70%;left:68%;background:var(--cabin-yel);--dur:4.1s;--delay:2s;"></div>
                    <div class="star" style="width:6px;height:6px;top:52%;left:24%;background:var(--cabin-red);--dur:3.6s;--delay:1s;"></div>

                    <div class="cloud cloud-1"></div>
                    <div class="cloud cloud-2"></div>

                    <div class="balloon">
                        <div class="balloon-top"></div>
                        <div class="balloon-basket"></div>
                    </div>

                    <div class="coaster-container">
                        <svg width="100%" height="200" style="position:absolute; bottom:0;">
                            <defs>
                                <linearGradient id="coasterGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:0.7"/>
                                    <stop offset="50%" style="stop-color:#fbbf24;stop-opacity:0.7"/>
                                    <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:0.7"/>
                                </linearGradient>
                            </defs>
                            <path id="coasterPath" d="M-100,180 Q300,20 600,180 T1500,180" fill="transparent" stroke="url(#coasterGrad)" stroke-width="2"/>
                            <circle r="6" fill="#ff6b6b">
                                <animateMotion dur="10s" repeatCount="indefinite" rotate="auto"><mpath href="#coasterPath"/></animateMotion>
                            </circle>
                            <circle r="6" fill="#fbbf24">
                            <circle r="6" fill="#60a5fa">
                                <animateMotion dur="10s" begin="1.4s" repeatCount="indefinite" rotate="auto"><mpath href="#coasterPath"/></animateMotion>
                            </circle>
                                <animateMotion dur="10s" begin="0.6s" repeatCount="indefinite" rotate="auto"><mpath href="#coasterPath"/></animateMotion>
                            </circle>
                        </svg>
                    </div>

                    <div class="ferris-wheel-container">
                        <div class="wheel">
                            <div class="spoke-x"></div>
                            <div class="spoke-y"></div>
                            <div class="cabin"><div class="cabin-box"></div></div>
                            <div class="cabin"><div class="cabin-box"></div></div>
                            <div class="cabin"><div class="cabin-box"></div></div>
                            <div class="cabin"><div class="cabin-box"></div></div>
                            <div class="cabin"><div class="cabin-box"></div></div>
                            <div class="cabin"><div class="cabin-box"></div></div>
                        </div>
                        <div class="stand"></div>
                    </div>
                    <div class="ground-hill"></div>
                </div>

                <!-- Parent Content -->
                <div style="padding: 1rem; position: relative; z-index: 10; flex-grow: 1;">

                    <!-- Active Session Card -->
                    <div class="parent-view-card" id="parent-active-card">
                        <div class="status-badge status-badge-in" id="p-status-badge">ŸÖÿ™Ÿàÿßÿ¨ÿØ ÿ≠ÿßŸÑŸäÿßŸã</div>
                        <h2 id="p-child-name" class="parent-child-name">ÿßÿ≥ŸÖ ÿßŸÑÿ∑ŸÅŸÑ</h2>
                        <p id="p-child-snack" class="parent-snack-text"></p>
                        <div id="p-child-id" class="child-number-display">#0000</div>

                        <div class="parent-timer-circle">
                            <div class="timer-inner">
                                <div class="timer-text-big" id="live-timer">00:00:00</div>
                            </div>
                        </div>

                        <p class="entry-time-row">ŸàŸÇÿ™ ÿßŸÑÿØÿÆŸàŸÑ: <span id="entry-time-display"></span></p>
                        <p class="cost-row">ÿßŸÑÿ™ŸÉŸÑŸÅÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©: <span id="live-cost">0</span> <small style="color:var(--navy-400);">ÿ¨.ŸÖ</small></p>

                        <!-- Chat -->
                        <div class="chat-container">
                            <div id="parent-chat-messages" class="chat-messages">
                                <div style="text-align:center; color:var(--navy-500); font-size:0.8rem; padding:8px;">ŸäŸÖŸÉŸÜŸÉ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑÿ•ÿØÿßÿ±ÿ©</div>
                            </div>
                            <div class="chat-input-area">
                                <input type="text" id="parent-message-input" class="form-control" placeholder="ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑÿ•ÿØÿßÿ±ÿ©..." onkeypress="if(event.key==='Enter') sendParentMessage()">
                                <button class="btn btn-primary" onclick="sendParentMessage()" style="border-radius: 10px; width: 48px; min-width:48px; padding:0; position:relative;">
                                    <i class="fas fa-paper-plane"></i>
                                    <span id="parent-msg-badge" class="hidden notification-badge">0</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Session Ended Card -->
                    <div id="session-ended-card" class="parent-view-card hidden">
                        <h2 class="session-ended-title">üèÅ ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑÿ¨ŸÑÿ≥ÿ©</h2>
                        <p class="session-ended-sub">ÿ∫ÿßÿØÿ± ÿßŸÑÿ∑ŸÅŸÑ ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÑÿπÿ®.</p>
                        <div class="final-cost-big">ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÜŸáÿßÿ¶Ÿä: <span id="final-cost">0</span> <small style="color:var(--navy-400); font-size:1.2rem;">ÿ¨.ŸÖ</small></div>
                        <p class="thanks-text">üéà ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ≤Ÿäÿßÿ±ÿ™ŸÉŸÖ!</p>
                        <div class="tagline-box">
                            <h4>ŸÅŸä ÿßÿ≥ÿ™ÿ∂ÿßŸÅÿ© ÿ£Ÿàÿ®ÿ±ÿß ÿπÿßÿ¥Ÿàÿ±</h4>
                            <p>..ŸÖŸÜ ŸáŸÜÿß ÿ™ÿ®ÿØÿ£ ÿßŸÑÿ≠ŸÉÿßŸäÿ©</p>
                        </div>
                    </div>
                </div>

                <div class="developer-footer">
                    <p>ÿ®ÿ±ŸÖÿ¨ÿ© Ÿàÿ™ÿ∑ŸàŸäÿ± ÿ®ŸÉŸÑ ÿ≠ÿ® <span class="heart-beat">‚ù§Ô∏è</span></p>
                    <p>ÿßŸÑŸÖŸáŸÜÿØÿ≥ ŸÖÿ≠ŸÖÿØ ÿ≠ŸÖÿßÿØ</p>
                    <div class="footer-links">
                        <a href="tel:01279934735"><i class="fas fa-phone"></i> 01279934735</a>
                        <a href="https://www.facebook.com/en.mohamed.nasr" target="_blank"><i class="fab fa-facebook-f"></i> ŸÅŸäÿ≥ÿ®ŸàŸÉ</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ============================================================
         ü™ü MODALS
         ============================================================ -->

    <!-- Admin Chat Modal -->
    <div id="admin-chat-modal" class="modal">
        <div class="modal-content modal-chat-content">
            <div class="modal-chat-header">
                <h3 id="chat-modal-title">ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿπ ŸàŸÑŸä ÿßŸÑÿ£ŸÖÿ±</h3>
                <button class="modal-close-btn" onclick="closeAdminChat()">&times;</button>
            </div>
            <div id="admin-chat-history" class="chat-messages" style="flex:1; overflow-y:auto;"></div>
            <div class="chat-input-area">
                <input type="text" id="admin-chat-input" class="form-control" placeholder="ÿßŸÉÿ™ÿ® ÿ±ÿØ..." onkeypress="if(event.key==='Enter') sendAdminMessage()">
                <button class="btn btn-primary" onclick="sendAdminMessage()" style="width:auto; min-width:80px;"><i class="fas fa-paper-plane"></i> ÿ•ÿ±ÿ≥ÿßŸÑ</button>
            </div>
        </div>
    </div>

    <!-- Finance Summary Modal -->
    <div id="finance-modal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-chart-bar" style="color:var(--gold);"></i> ŸÖŸÑÿÆÿµ ÿ≥ÿ±Ÿäÿπ</h2>
            <div class="finance-grid">
                <div class="finance-item">
                    <h4>üìÖ ÿßŸÑŸäŸàŸÖ</h4>
                    <div class="money" id="stat-today">0</div>
                </div>
                <div class="finance-item">
                    <h4>üìÜ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ</h4>
                    <div class="money" id="stat-week">0</div>
                </div>
                <div class="finance-item">
                    <h4>üìä ÿßŸÑÿ¥Ÿáÿ±</h4>
                    <div class="money" id="stat-month">0</div>
                </div>
            </div>
            <button class="btn btn-outline" onclick="closeFinanceModal()" style="margin-top:20px; width:100%;"><i class="fas fa-times"></i> ÿ•ÿ∫ŸÑÿßŸÇ</button>
        </div>
    </div>

    <!-- Checkout Confirmation Modal -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <h2 style="color:var(--coral);"><i class="fas fa-door-open"></i> ÿ•ŸÜŸáÿßÿ° ÿ¨ŸÑÿ≥ÿ©</h2>
            <p class="checkout-duration">ÿßŸÑŸÖÿØÿ©: <strong id="modal-duration">00:00:00</strong></p>
            <div class="checkout-price-big" id="modal-price">0 ÿ¨.ŸÖ</div>
            <p class="checkout-price-note">(20 ÿ¨.ŸÖ ŸÑŸÉŸÑ ÿ≥ÿßÿπÿ© ŸÉÿßŸÖŸÑÿ© + ÿßŸÑÿ•ÿ∂ÿßŸÅÿßÿ™)</p>
            <div class="modal-btn-row">
                <button class="btn btn-danger" onclick="confirmCheckout()"><i class="fas fa-check"></i> ÿ™ÿ£ŸÉŸäÿØ</button>
                <button class="btn btn-outline" onclick="closeModal()"><i class="fas fa-times"></i> ÿ•ŸÑÿ∫ÿßÿ°</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" style="position:fixed; bottom:24px; left:24px; z-index:3000; max-width:320px;"></div>

    <!-- Audio -->
    <audio id="msg-sound"  src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_3f32527b79.mp3"></audio>
    <audio id="hour-sound" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_12b0c7443c.mp3"></audio>

    <!-- ============================================================
         ‚öôÔ∏è  JAVASCRIPT ‚Äî FIREBASE + APP LOGIC
         ============================================================ -->
    <script type="module">
        import { initializeApp }      from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, push, onValue, update, set, get } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        /* ‚îÄ‚îÄ‚îÄ Firebase Config ‚îÄ‚îÄ‚îÄ */
        const firebaseConfig = {
          apiKey: "AIzaSyDIH-wzZV71U-zbkxArRE4f9oiCtwvKOWA",
          authDomain: "operaestdafa.firebaseapp.com",
          databaseURL: "https://operaestdafa-default-rtdb.firebaseio.com",
          projectId: "operaestdafa",
          storageBucket: "operaestdafa.firebasestorage.app",
          messagingSenderId: "44885598287",
          appId: "1:44885598287:web:e2b0d3497b86c69de38a3a",
          measurementId: "G-X1129EKN1P"
        };
        const app = initializeApp(firebaseConfig);
        const db  = getDatabase(app);

        /* ‚îÄ‚îÄ‚îÄ Audio & Notifications ‚îÄ‚îÄ‚îÄ */
        const msgSound  = document.getElementById('msg-sound');
        const hourSound = document.getElementById('hour-sound');

        function requestNotifyPermission() {
            if ("Notification" in window && Notification.permission !== "granted") Notification.requestPermission();
        }
        function sendBrowserNotification(title, body) {
            if ("Notification" in window && Notification.permission === "granted")
                new Notification(title, { body, icon: 'https://raw.githubusercontent.com/mohamednasr5/opera/main/01.png' });
        }
        function playSound(type) {
            const el = type === 'msg' ? msgSound : hourSound;
            el.currentTime = 0;
            el.play().catch(() => {});
        }

        /* ‚îÄ‚îÄ‚îÄ Global State ‚îÄ‚îÄ‚îÄ */
        let currentChildId       = null;
        let currentChildLink     = "";
        let parentInterval       = null;
        let adminTimerInterval   = null;
        let allChildrenData      = {};
        let currentChatId        = null;
        let lastMessageCounts    = {};
        let searchQuery          = "";

        /* ‚îÄ‚îÄ‚îÄ DOM Refs ‚îÄ‚îÄ‚îÄ */
        const adminView     = document.getElementById('admin-view');
        const financialView = document.getElementById('financial-view');
        const parentView    = document.getElementById('parent-view');
        const loginScreen   = document.getElementById('login-screen');
        const listActive    = document.getElementById('kids-list-active');
        const listHistory   = document.getElementById('kids-list-history');
        const qrContainer   = document.getElementById('qr-code');
        const searchInput   = document.getElementById('admin-search');

        /* ‚îÄ‚îÄ‚îÄ Search ‚îÄ‚îÄ‚îÄ */
        searchInput.addEventListener('input', e => { searchQuery = e.target.value.toLowerCase(); filterAdminList(); });

        function filterAdminList() {
            document.querySelectorAll('#kids-list-active .kid-card').forEach(card => {
                const n = card.getAttribute('data-name').toLowerCase();
                const p = card.getAttribute('data-phone').toLowerCase();
                const i = card.getAttribute('data-id');
                card.style.display = (n.includes(searchQuery) || p.includes(searchQuery) || i === searchQuery) ? 'flex' : 'none';
            });
        }

        /* ‚îÄ‚îÄ‚îÄ Login & Routing ‚îÄ‚îÄ‚îÄ */
        function handleEnter(e) { if (e.key === 'Enter') checkLogin(); }
        window.handleEnter = handleEnter;

        window.checkLogin = () => {
            requestNotifyPermission();
            const pass = document.getElementById('login-pass').value;
            if (pass === '0100') {
                loginScreen.classList.add('hidden');
                document.getElementById('nav-stats-btn').classList.add('hidden');
                document.getElementById('nav-logout-btn').classList.remove('hidden');
                document.getElementById('admin-controls').style.display = 'flex';
                initAdminView();
            } else if (pass === '521988') {
                loginScreen.classList.add('hidden');
                document.getElementById('nav-stats-btn').classList.add('hidden');
                document.getElementById('nav-logout-btn').classList.remove('hidden');
                document.getElementById('admin-controls').style.display = 'flex';
                initFinancialView();
            } else {
                showToast("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿÆÿßÿ∑ÿ¶ÿ© ‚ùå");
                document.getElementById('login-pass').value = '';
            }
        };

        window.logout = () => location.reload();

        /* ‚îÄ‚îÄ‚îÄ URL-based Parent Mode ‚îÄ‚îÄ‚îÄ */
        const urlParams    = new URLSearchParams(window.location.search);
        const viewMode     = urlParams.get('mode');
        const childIdParam = urlParams.get('id');

        if (viewMode === 'parent' && childIdParam) {
            loginScreen.classList.add('hidden');
            document.getElementById('admin-controls').style.display = 'none';
            document.getElementById('header-subtitle').innerText = "ÿ®Ÿàÿßÿ®ÿ© ŸÖÿ™ÿßÿ®ÿπÿ© ÿ£ŸàŸÑŸäÿßÿ° ÿßŸÑÿ£ŸÖŸàÿ±";
            requestNotifyPermission();
            initParentView(childIdParam);
        }

        /* ‚îÄ‚îÄ‚îÄ Header Clock ‚îÄ‚îÄ‚îÄ */
        (function clockTick() {
            document.getElementById('header-datetime').innerText =
                new Date().toLocaleDateString('ar-EG', { weekday:'long', day:'numeric', month:'long', hour:'2-digit', minute:'2-digit' });
            setTimeout(clockTick, 1000);
        })();

        /* ================================================
           ADMIN VIEW
           ================================================ */
        function initAdminView() {
            adminView.classList.remove('hidden');
            document.getElementById('header-subtitle').innerText = "ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©";

            onValue(ref(db, 'children'), snapshot => {
                const data = snapshot.val();
                allChildrenData = data || {};
                listActive.innerHTML  = '';
                listHistory.innerHTML = '';
                if (!data) { listActive.innerHTML = '<p style="text-align:center; color:var(--navy-500); padding:20px;">ŸÑÿß ŸäŸàÿ¨ÿØ ÿ£ÿ∑ŸÅÿßŸÑ ŸÖÿ≥ÿ¨ŸÑŸäŸÜ</p>'; return; }

                Object.keys(data).forEach(key => {
                    const child = data[key];
                    const link  = `${location.origin}${location.pathname}?mode=parent&id=${key}`;
                    let productHtml = '';
                    if (child.productName) {
                        productHtml = `<span class="kid-tag product-tag"><i class="fas fa-shopping-bag"></i> ${child.productName} (${child.productPrice || 0} ÿ¨.ŸÖ)</span>`;
                    }

                    if (child.status === 'in') {
                        const billableTime = Date.now() - child.entryTime - (child.totalPausedTime || 0);
                        const msgs     = child.messages ? Object.values(child.messages) : [];
                        const msgCount = msgs.length;
                        const lastCount = lastMessageCounts[key] || 0;

                        if (msgCount > lastCount) {
                            const lastMsg = msgs[msgs.length - 1];
                            if (lastMsg.sender === 'parent') { playSound('msg'); sendBrowserNotification(`ÿ±ÿ≥ÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ© ŸÖŸÜ: ${child.name}`, lastMsg.text); showToast(`üì© ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÜ ${child.name}`); }
                        }
                        lastMessageCounts[key] = msgCount;
                        const badgeHtml = msgCount > 0 ? `<span class="notification-badge">${msgCount}</span>` : '';

                        const div = document.createElement('div');
                        div.className = 'kid-card in-status';
                        div.setAttribute('data-name',  child.name);
                        div.setAttribute('data-phone', child.phone);
                        div.setAttribute('data-id',    child.childId || '');
                        div.innerHTML = `
                            <div class="kid-info">
                                <h3>${child.name} <span class="kid-id-badge">#${child.childId || '0000'}</span></h3>
                                <div class="kid-meta">
                                    <span class="kid-tag"><i class="fas fa-mobile-alt"></i> ${child.phone}</span>
                                    ${productHtml}
                                </div>
                                <div class="timer-display"><i class="fas fa-clock"></i> <span class="time-text" data-name="${child.name}" data-billable="${billableTime}" data-last-hour="0">${formatDuration(billableTime)}</span></div>
                            </div>
                            <div class="controls">
                                <button class="btn btn-whatsapp" onclick="sendToWhatsApp('${child.phone}','${encodeURIComponent(link)}')"><i class="fab fa-whatsapp"></i></button>
                                <button class="btn btn-warning" onclick="pauseChild('${key}')" title="ÿÆÿ±Ÿàÿ¨ ŸÖÿ§ŸÇÿ™"><i class="fas fa-pause"></i></button>
                                <button class="btn btn-primary" style="position:relative;" onclick="openAdminChat('${key}','${child.name}')" title="ŸÖÿ≠ÿßÿØÿ´ÿ©">
                                    <i class="fas fa-comments"></i> ${badgeHtml}
                                </button>
                                <button class="btn btn-danger" onclick="prepareCheckout('${key}')"><i class="fas fa-sign-out-alt"></i> ÿÆÿ±Ÿàÿ¨</button>
                            </div>`;
                        listActive.appendChild(div);

                    } else if (child.status === 'paused') {
                        const billableTime = child.pauseStartTime - child.entryTime - (child.totalPausedTime || 0);
                        const div = document.createElement('div');
                        div.className = 'kid-card paused-status';
                        div.setAttribute('data-name',  child.name);
                        div.setAttribute('data-phone', child.phone);
                        div.setAttribute('data-id',    child.childId || '');
                        div.innerHTML = `
                            <div class="kid-info">
                                <h3>${child.name} <span class="kid-id-badge">#${child.childId || '0000'}</span></h3>
                                <div class="kid-meta"><span class="status-badge status-badge-paused">‚è∏ ÿÆÿ±Ÿàÿ¨ ŸÖÿ§ŸÇÿ™</span> ${productHtml}</div>
                                <div class="timer-display timer-paused"><i class="fas fa-clock"></i> ${formatDuration(billableTime)}</div>
                            </div>
                            <div class="controls">
                                <button class="btn btn-success" onclick="resumeChild('${key}')"><i class="fas fa-play"></i> ÿßÿ≥ÿ™ŸÉŸÖÿßŸÑ</button>
                                <button class="btn btn-danger" onclick="prepareCheckout('${key}')"><i class="fas fa-sign-out-alt"></i> ÿÆÿ±Ÿàÿ¨ ŸÜŸáÿßÿ¶Ÿä</button>
                            </div>`;
                        listActive.appendChild(div);

                    } else {
                        const diff = child.exitTime - child.entryTime - (child.totalPausedTime || 0);
                        const div  = document.createElement('div');
                        div.className = 'kid-card out-status';
                        div.innerHTML = `
                            <div class="kid-info">
                                <h3>${child.name} <small style="color:var(--navy-500); text-decoration:line-through;">(ÿÆÿßÿ±ÿ¨)</small> <span class="kid-id-badge">#${child.childId || '0000'}</span></h3>
                                <div class="kid-meta">
                                    <span class="kid-tag"><i class="fas fa-hourglass-end"></i> ${formatDuration(diff)}</span>
                                    <span class="kid-tag"><i class="fas fa-calendar"></i> ${new Date(child.exitTime).toLocaleDateString('ar-EG')}</span>
                                    ${productHtml}
                                </div>
                                <div style="font-weight:800; color:var(--coral); margin-top:4px;"><i class="fas fa-pound-sign"></i> ${child.totalCost} ÿ¨.ŸÖ</div>
                            </div>`;
                        listHistory.appendChild(div);
                    }
                });
                filterAdminList();
            });

            /* Live timer tick */
            if (adminTimerInterval) clearInterval(adminTimerInterval);
            adminTimerInterval = setInterval(() => {
                document.querySelectorAll('.time-text').forEach(el => {
                    let t = parseInt(el.getAttribute('data-billable')) + 1000;
                    el.setAttribute('data-billable', t);
                    el.innerText = formatDuration(t);
                    const curHour  = Math.floor(t / 3600000);
                    const lastHour = parseInt(el.getAttribute('data-last-hour'));
                    if (curHour > lastHour) {
                        playSound('hour');
                        sendBrowserNotification("ŸÖÿ±Ÿàÿ± ÿ≥ÿßÿπÿ© ‚è∞", `ÿ£ÿ™ŸÖ ÿßŸÑÿ∑ŸÅŸÑ ${el.getAttribute('data-name')} ÿ≥ÿßÿπÿ© ÿ¨ÿØŸäÿØÿ©.`);
                        showToast(`‚è∞ ŸÖÿ± ÿ≥ÿßÿπÿ© ŸÑŸÑÿ∑ŸÅŸÑ: ${el.getAttribute('data-name')}`);
                        el.setAttribute('data-last-hour', curHour);
                    }
                });
            }, 1000);

            /* Check-in form */
            document.getElementById('checkin-form').onsubmit = e => {
                e.preventDefault();
                const name        = document.getElementById('child-name').value;
                const phone       = document.getElementById('parent-phone').value;
                const productName = document.getElementById('extra-item').value;
                const productPrice= parseFloat(document.getElementById('extra-price').value) || 0;
                const randomId    = Math.floor(1000 + Math.random() * 9000).toString();
                const newRef      = push(ref(db, 'children'));
                const link        = `${location.origin}${location.pathname}?mode=parent&id=${newRef.key}`;

                set(newRef, { name, phone, productName, productPrice, entryTime: Date.now(), status:'in', messages:[], totalPausedTime:0, childId: randomId })
                .then(() => {
                    showToast(`ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ${name} (ÿ±ŸÇŸÖ: ${randomId})`);
                    ['child-name','parent-phone','extra-item','extra-price'].forEach(id => document.getElementById(id).value = '');
                    currentChildLink = link;
                    document.getElementById('new-child-qr').classList.remove('hidden');
                    document.getElementById('qr-parent-name').innerText = `${name} ‚Äî ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÅŸÑ: ${randomId}`;
                    qrContainer.innerHTML = '';
                    new QRCode(qrContainer, { text: link, width: 128, height: 128, colorDark: '#2c3e50', colorLight: '#ffffff' });
                    document.getElementById('test-link-btn').href = link;
                    document.getElementById('wa-btn-new').onclick = () => sendToWhatsApp(phone, encodeURIComponent(link));
                });
            };
        }

        /* ================================================
           CHAT SYSTEM
           ================================================ */
        window.openAdminChat = (id, name) => {
            currentChatId = id;
            document.getElementById('chat-modal-title').innerText = `ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿπ ŸàÿßŸÑÿØ/ÿ©: ${name}`;
            document.getElementById('admin-chat-modal').style.display = 'flex';
            document.getElementById('admin-chat-input').focus();
            onValue(ref(db, `children/${id}/messages`), snapshot => {
                const messages   = snapshot.val();
                const historyEl  = document.getElementById('admin-chat-history');
                historyEl.innerHTML = '';
                if (!messages) return;
                Object.values(messages).sort((a,b) => a.timestamp - b.timestamp).forEach(msg => {
                    const div = document.createElement('div');
                    div.className = `message ${msg.sender}`;
                    div.innerHTML = `<span class="sender-name">${msg.sender === 'admin' ? 'ÿ£ŸÜÿ™' : 'ÿßŸÑŸàÿßŸÑÿØ'}</span>${msg.text}`;
                    historyEl.appendChild(div);
                });
                historyEl.scrollTop = historyEl.scrollHeight;
            });
        };
        window.closeAdminChat = () => { document.getElementById('admin-chat-modal').style.display = 'none'; currentChatId = null; };
        window.sendAdminMessage = () => {
            const input = document.getElementById('admin-chat-input');
            const text  = input.value.trim();
            if (!text || !currentChatId) return;
            push(ref(db, `children/${currentChatId}/messages`), { text, sender:'admin', timestamp: Date.now() });
            input.value = '';
        };

        /* ================================================
           FINANCIAL VIEW
           ================================================ */
        function initFinancialView() {
            financialView.classList.remove('hidden');
            document.getElementById('header-subtitle').innerText = "ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿ≥ÿ¨ŸÑÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ©";
            const logsContainer = document.getElementById('financial-logs');
            logsContainer.innerHTML = '<div style="text-align:center; padding:30px; color:var(--navy-400);"><i class="fas fa-spinner fa-spin"></i> ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ‚Ä¶</div>';

            get(ref(db, 'children')).then(snapshot => {
                const data = snapshot.val();
                if (!data) { logsContainer.innerHTML = '<div style="text-align:center; padding:30px; color:var(--navy-400);">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿπÿØ.</div>'; return; }
                const records = {};
                let grandTotal = 0;
                Object.keys(data).forEach(key => {
                    const child = data[key];
                    if (child.status === 'out' && child.exitTime) {
                        const cost      = parseFloat(child.totalCost);
                        const dateObj   = new Date(child.exitTime);
                        const dateKey   = `${dateObj.getFullYear()}-${dateObj.getMonth()+1}-${dateObj.getDate()}`;
                        const dateFmt   = dateObj.toLocaleDateString('ar-EG', { weekday:'long', day:'numeric', month:'long', year:'numeric' });
                        const timeFmt   = dateObj.toLocaleTimeString('ar-EG', { hour:'2-digit', minute:'2-digit' });
                        if (!records[dateKey]) records[dateKey] = { display: dateFmt, total: 0, items: [] };
                        records[dateKey].items.push({ name: `${child.name} (#${child.childId || '0000'})`, cost, time: timeFmt });
                        records[dateKey].total += cost;
                        grandTotal += cost;
                    }
                });
                document.getElementById('grand-total-display').innerText = grandTotal.toFixed(1) + ' ÿ¨.ŸÖ';
                logsContainer.innerHTML = '';
                if (!Object.keys(records).length) { logsContainer.innerHTML = '<div style="text-align:center; padding:30px; color:var(--navy-400);">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ¨ŸÑÿßÿ™ ÿÆÿ±Ÿàÿ¨ ÿ®ÿπÿØ.</div>'; return; }
                Object.keys(records).sort((a,b) => new Date(b) - new Date(a)).forEach(date => {
                    const dayData = records[date];
                    const wrap    = document.createElement('div');
                    wrap.className = 'day-group';
                    let rows = '';
                    dayData.items.forEach(item => {
                        rows += `<div class="record-row"><div><span class="record-name">${item.name}</span><span class="record-time">ŸàŸÇÿ™ ÿßŸÑÿÆÿ±Ÿàÿ¨: ${item.time}</span></div><span class="record-cost">${item.cost.toFixed(1)} ÿ¨.ŸÖ</span></div>`;
                    });
                    wrap.innerHTML = `
                        <div class="day-header"><span class="day-label">üìÖ ${dayData.display}</span><span>ÿ≥ÿ¨ŸÑ ŸäŸàŸÖŸä</span></div>
                        ${rows}
                        <div class="day-total"><span>ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸäŸàŸÖ</span><span>${dayData.total.toFixed(1)} ÿ¨.ŸÖ</span></div>`;
                    logsContainer.appendChild(wrap);
                });
            }).catch(() => { logsContainer.innerHTML = '<div style="text-align:center; padding:30px; color:var(--coral);">ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ.</div>'; });
        }

        /* ================================================
           ACTIONS (pause / resume / checkout)
           ================================================ */
        window.pauseChild = id => update(ref(db, `children/${id}`), { status:'paused', pauseStartTime: Date.now() });
        window.resumeChild = id => {
            get(ref(db, `children/${id}`)).then(snap => {
                const d = snap.val();
                update(ref(db, `children/${id}`), { status:'in', totalPausedTime: (d.totalPausedTime||0) + (Date.now() - d.pauseStartTime) });
            });
        };
        window.prepareCheckout = id => {
            currentChildId = id;
            get(ref(db, `children/${id}`)).then(s => {
                const c    = s.val();
                const bill = (c.status === 'paused' ? c.pauseStartTime : Date.now()) - c.entryTime - (c.totalPausedTime||0);
                const timeCost = calculateTimeCost(bill);
                const extra    = c.productPrice || 0;
                const total    = (parseFloat(timeCost) + parseFloat(extra)).toFixed(1);
                document.getElementById('modal-duration').innerText = formatDuration(bill);
                document.getElementById('modal-price').innerHTML = `${total} ÿ¨.ŸÖ<br><span style="font-size:0.82rem; color:var(--navy-400); font-weight:500;">(ŸàŸÇÿ™: ${timeCost} + ŸÖŸÜÿ™ÿ¨ÿßÿ™: ${extra})</span>`;
                document.getElementById('checkout-modal').style.display = 'flex';
            });
        };
        window.confirmCheckout = () => {
            get(ref(db, `children/${currentChildId}`)).then(s => {
                const c    = s.val();
                const bill = (c.status === 'paused' ? c.pauseStartTime : Date.now()) - c.entryTime - (c.totalPausedTime||0);
                const total = (parseFloat(calculateTimeCost(bill)) + parseFloat(c.productPrice || 0)).toFixed(1);
                update(ref(db, `children/${currentChildId}`), { status:'out', exitTime: Date.now(), totalCost: total });
                closeModal();
                showToast("‚úÖ ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨");
            });
        };

        window.closeModal  = () => document.getElementById('checkout-modal').style.display = 'none';
        window.closeQR     = () => document.getElementById('new-child-qr').classList.add('hidden');
        window.copyLink    = () => { navigator.clipboard.writeText(currentChildLink); showToast("üìã ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ"); };
        window.sendToWhatsApp = (phone, link) => {
            window.open(`https://wa.me/${phone.replace(/[^0-9]/g,'')}?text=${encodeURIComponent('ÿ±ÿßÿ®ÿ∑ ŸÖÿ™ÿßÿ®ÿπÿ© ÿ∑ŸÅŸÑŸÉ: '+decodeURIComponent(link))}`, '_blank');
        };

        /* ‚îÄ‚îÄ‚îÄ Finance Quick Modal ‚îÄ‚îÄ‚îÄ */
        window.openFinanceModal = () => {
            const now       = new Date();
            const startDay  = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
            const startWeek = startDay - 6*86400000;
            const startMonth= new Date(now.getFullYear(), now.getMonth(), 1).getTime();
            let d=0, w=0, m=0;
            Object.keys(allChildrenData).forEach(k => {
                const c = allChildrenData[k];
                if (c.status === 'out' && c.exitTime) {
                    const cost = parseFloat(c.totalCost);
                    if (c.exitTime >= startDay)   d += cost;
                    if (c.exitTime >= startWeek)  w += cost;
                    if (c.exitTime >= startMonth) m += cost;
                }
            });
            document.getElementById('stat-today').innerText  = d.toFixed(1);
            document.getElementById('stat-week').innerText   = w.toFixed(1);
            document.getElementById('stat-month').innerText  = m.toFixed(1);
            document.getElementById('finance-modal').style.display = 'flex';
        };
        window.closeFinanceModal = () => document.getElementById('finance-modal').style.display = 'none';

        /* ================================================
           PARENT VIEW
           ================================================ */
        function initParentView(id) {
            adminView.classList.add('hidden');
            financialView.classList.add('hidden');
            parentView.classList.remove('hidden');

            let prevMsgCount = 0;

            /* Chat listener */
            onValue(ref(db, `children/${id}/messages`), snapshot => {
                const messages  = snapshot.val();
                const container = document.getElementById('parent-chat-messages');
                container.innerHTML = '';
                let currentCount = 0, msgsArray = [];
                if (messages) {
                    msgsArray = Object.values(messages).sort((a,b) => a.timestamp - b.timestamp);
                    msgsArray.forEach(msg => {
                        const div = document.createElement('div');
                        div.className = `message ${msg.sender === 'admin' ? 'admin' : 'parent'}`;
                        div.innerHTML = `<span class="sender-name">${msg.sender === 'admin' ? 'ÿßŸÑÿ•ÿØÿßÿ±ÿ©' : 'ÿ£ŸÜÿ™'}</span>${msg.text}`;
                        container.appendChild(div);
                        currentCount++;
                    });
                }
                if (currentCount > prevMsgCount && currentCount > 0) {
                    const lastMsg = msgsArray[msgsArray.length - 1];
                    if (lastMsg.sender === 'admin') { playSound('msg'); sendBrowserNotification("ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÜ ÿßŸÑÿ•ÿØÿßÿ±ÿ© üí¨", lastMsg.text); showToast("üì© ÿ±ÿ≥ÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ© ŸÖŸÜ ÿßŸÑÿ•ÿØÿßÿ±ÿ©"); }
                }
                const badge = document.getElementById('parent-msg-badge');
                if (currentCount > 0) { badge.innerText = currentCount; badge.classList.remove('hidden'); } else { badge.classList.add('hidden'); }
                prevMsgCount = currentCount;
                container.scrollTop = container.scrollHeight;
            });

            /* Data listener */
            onValue(ref(db, `children/${id}`), s => {
                const c = s.val();
                if (!c) return;
                document.getElementById('p-child-id').innerText   = '#' + (c.childId || '0000');
                document.getElementById('p-child-name').innerText = c.name;
                document.getElementById('p-child-snack').innerText = c.productName ? `üõí ${c.productName} (${c.productPrice} ÿ¨.ŸÖ)` : 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©';
                document.getElementById('entry-time-display').innerText = new Date(c.entryTime).toLocaleTimeString('ar-EG', { hour:'2-digit', minute:'2-digit' });

                const badge = document.getElementById('p-status-badge');
                const timer = document.getElementById('live-timer');

                if (c.status === 'in') {
                    badge.className  = 'status-badge status-badge-in';
                    badge.innerText  = 'ŸÖÿ™Ÿàÿßÿ¨ÿØ ÿ≠ÿßŸÑŸäÿßŸã';
                    document.getElementById('parent-active-card').style.display  = 'block';
                    document.getElementById('session-ended-card').classList.add('hidden');
                    if (parentInterval) clearInterval(parentInterval);
                    let lastHour = 0;
                    const tick = () => {
                        const t = Date.now() - c.entryTime - (c.totalPausedTime||0);
                        timer.innerText = formatDuration(t);
                        document.getElementById('live-cost').innerText = (parseFloat(calculateTimeCost(t)) + parseFloat(c.productPrice||0)).toFixed(1);
                        const curHour = Math.floor(t / 3600000);
                        if (curHour > lastHour) { playSound('hour'); sendBrowserNotification("ÿ™ŸÜÿ®ŸäŸá ÿßŸÑŸàŸÇÿ™ ‚è∞", "ÿ£ÿ™ŸÖ ÿ∑ŸÅŸÑŸÉ ÿ≥ÿßÿπÿ© ÿ•ÿ∂ÿßŸÅŸäÿ©."); lastHour = curHour; }
                    };
                    tick();
                    parentInterval = setInterval(tick, 1000);
                } else if (c.status === 'paused') {
                    clearInterval(parentInterval);
                    badge.className = 'status-badge status-badge-paused';
                    badge.innerText = 'ÿÆÿ±Ÿàÿ¨ ŸÖÿ§ŸÇÿ™';
                    timer.innerText = formatDuration(c.pauseStartTime - c.entryTime - (c.totalPausedTime||0));
                } else if (c.status === 'out') {
                    clearInterval(parentInterval);
                    document.getElementById('parent-active-card').style.display  = 'none';
                    document.getElementById('session-ended-card').classList.remove('hidden');
                    document.getElementById('final-cost').innerText = c.totalCost;
                }
            });
        }

        window.sendParentMessage = () => {
            const input = document.getElementById('parent-message-input');
            const t     = input.value.trim();
            if (!t) return;
            push(ref(db, `children/${childIdParam}/messages`), { text: t, sender:'parent', timestamp: Date.now() });
            input.value = '';
        };

        /* ‚îÄ‚îÄ‚îÄ Pricing ‚îÄ‚îÄ‚îÄ */
        function calculateTimeCost(ms) { return Math.ceil(ms / 3600000) * 20; }

        /* ‚îÄ‚îÄ‚îÄ Utils ‚îÄ‚îÄ‚îÄ */
        function formatDuration(ms) {
            const s = Math.floor((ms/1000)%60), m = Math.floor((ms/60000)%60), h = Math.floor(ms/3600000);
            return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;Ÿê
        }

        window.showToast = msg => {
            const container = document.getElementById('toast-container');
            const toast     = document.createElement('div');
            toast.className = 'toast-item';
            toast.innerText = msg;
            container.prepend(toast);
            setTimeout(() => toast.remove(), 3200);
        };
    </script>
</body>
</html>
